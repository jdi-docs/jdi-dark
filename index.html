
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#jdi-dark-framework" class="toc-h1 toc-link" data-title="JDI Dark Framework">JDI Dark Framework</a>
          </li>
          <li>
            <a href="#highlights" class="toc-h1 toc-link" data-title="Highlights">Highlights</a>
          </li>
          <li>
            <a href="#simple-jdi-dark-examples" class="toc-h1 toc-link" data-title="Simple JDI Dark examples">Simple JDI Dark examples</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-service-object-model" class="toc-h2 toc-link" data-title="1. Service Object Model">1. Service Object Model</a>
                  </li>
                  <li>
                    <a href="#2-create-simple-test-using-service-object" class="toc-h2 toc-link" data-title="2. Create simple test using Service Object">2. Create simple test using Service Object</a>
                  </li>
                  <li>
                    <a href="#3-create-tests-without-using-service-object" class="toc-h2 toc-link" data-title="3. Create tests without using Service Object">3. Create tests without using Service Object</a>
                  </li>
                  <li>
                    <a href="#4-query-parameters-headers-cookies-support" class="toc-h2 toc-link" data-title="4. Query Parameters, Headers, Cookies support">4. Query Parameters, Headers, Cookies support</a>
                  </li>
                  <li>
                    <a href="#5-performance-testing-support" class="toc-h2 toc-link" data-title="5. Performance testing support">5. Performance testing support</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tutorial" class="toc-h1 toc-link" data-title="Tutorial">Tutorial</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-integration" class="toc-h2 toc-link" data-title="1. Integration">1. Integration</a>
                  </li>
                  <li>
                    <a href="#2-jdi-dark-at-glance" class="toc-h2 toc-link" data-title="2. JDI Dark at glance">2. JDI Dark at glance</a>
                  </li>
                  <li>
                    <a href="#3-jdi-dark-service-objects" class="toc-h2 toc-link" data-title="3. JDI Dark Service Objects">3. JDI Dark Service Objects</a>
                  </li>
                  <li>
                    <a href="#4-jdi-dark-performance" class="toc-h2 toc-link" data-title="4. JDI Dark Performance">4. JDI Dark Performance</a>
                  </li>
                  <li>
                    <a href="#5-jdi-dark-and-cucumber" class="toc-h2 toc-link" data-title="5. JDI Dark and Cucumber">5. JDI Dark and Cucumber</a>
                  </li>
                  <li>
                    <a href="#jdi-dark-settings-at-glance" class="toc-h2 toc-link" data-title="JDI Dark settings at glance">JDI Dark settings at glance</a>
                  </li>
                  <li>
                    <a href="#api-testing-framework-structure" class="toc-h2 toc-link" data-title="API Testing Framework structure">API Testing Framework structure</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#documentation" class="toc-h1 toc-link" data-title="Documentation">Documentation</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#framework-usage" class="toc-h2 toc-link" data-title="Framework usage">Framework usage</a>
                  </li>
                  <li>
                    <a href="#http-methods" class="toc-h2 toc-link" data-title="HTTP methods">HTTP methods</a>
                  </li>
                  <li>
                    <a href="#request-data" class="toc-h2 toc-link" data-title="Request Data">Request Data</a>
                  </li>
                  <li>
                    <a href="#tests-without-service-object" class="toc-h2 toc-link" data-title="Tests without Service Object">Tests without Service Object</a>
                  </li>
                  <li>
                    <a href="#tests-with-service-object" class="toc-h2 toc-link" data-title="Tests with Service Object">Tests with Service Object</a>
                  </li>
                  <li>
                    <a href="#response-data" class="toc-h2 toc-link" data-title="Response data">Response data</a>
                  </li>
                  <li>
                    <a href="#deserialization" class="toc-h2 toc-link" data-title="Deserialization">Deserialization</a>
                  </li>
                  <li>
                    <a href="#performance-testing" class="toc-h2 toc-link" data-title="Performance testing">Performance testing</a>
                  </li>
                  <li>
                    <a href="#reporting" class="toc-h2 toc-link" data-title="Reporting">Reporting</a>
                  </li>
                  <li>
                    <a href="#access-restassured" class="toc-h2 toc-link" data-title="Access RestAssured">Access RestAssured</a>
                  </li>
                  <li>
                    <a href="#review-guide" class="toc-h2 toc-link" data-title="Review Guide">Review Guide</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.facebook.com/groups/jdi.framework/' target="_blank">Facebook</a></li>
            <li><a href='https://github.com/jdi-testing/jdi-dark' target="_blank">Github</a></li>
            <li><a href='https://join.skype.com/u2Cel0MWHkAO' target="_blank">Skype EN</a></li>
            <li><a href='https://join.skype.com/clvyVvnZvWqc' target="_blank">Skype RU</a></li>
            <li><a href="mailto:roman.iovlev.jdi@gmail.com?Subject=JDI question" target="_blank">Send Mail</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='jdi-dark-framework'>JDI Dark Framework</h1>
<p>JDI Dark is Simple Test Automation Framework for Web Services Testing powered by REST Assured.</p>
<h1 id='highlights'>Highlights</h1>
<ul>
<li>Obvious Service Object model that helps to reduce test development effort and increase its speed</li>
<li>Extended capabilities of REST Assured framework with all its features kept</li>
<li>Simple interface for sending requests and response analysis</li>
<li>Performance testing support</li>
<li>Detailed logging of requests and response in JSON format which can be used in your reports</li>
</ul>
<h1 id='simple-jdi-dark-examples'>Simple JDI Dark examples</h1><h2 id='1-service-object-model'>1. Service Object Model</h2><pre class="highlight java tab-java"><code><span class="nd">@ServiceDomain</span><span class="o">(</span><span class="s">"http://httpbin.org/"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceExample</span> <span class="o">{</span> 
    <span class="nd">@GET</span><span class="o">(</span><span class="s">"/get"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">getInfo</span><span class="o">;</span>
    <span class="nd">@POST</span><span class="o">(</span><span class="s">"/post"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">post</span><span class="o">;</span>
    <span class="nd">@PUT</span><span class="o">(</span><span class="s">"/put"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">put</span><span class="o">;</span>
    <span class="nd">@PATCH</span><span class="o">(</span><span class="s">"/patch"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">patch</span><span class="o">;</span>
    <span class="nd">@DELETE</span><span class="o">(</span><span class="s">"/delete"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">delete</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
<p>JDI Dark provides capability to describe your API as a simple Service Object.
That gives you an ability to unify and combine your REST methods and endpoints in one class
(similar to UI Page Object pattern).</p>

<p>Let&#39;s say we have a website for REST testing located by the following address: <a href="http://httpbin.org/">http://httpbin.org</a> and we need to test some of its endpoints.
We can create the Java class and describe methods we want to test.</p>

<p><em>So simple, isn&#39;t that right?</em></p>
<h2 id='2-create-simple-test-using-service-object'>2. Create simple test using Service Object</h2><pre class="highlight java tab-java"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">simpleRestTest</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">RestResponse</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">ServiceExample</span><span class="o">.</span><span class="na">getInfo</span><span class="o">.</span><span class="na">call</span><span class="o">();</span>
    <span class="n">resp</span><span class="o">.</span><span class="na">isOk</span><span class="o">().</span>
      <span class="n">body</span><span class="o">(</span><span class="s">"url"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"http://httpbin.org/get"</span><span class="o">)).</span>
      <span class="n">body</span><span class="o">(</span><span class="s">"headers.Host"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"httpbin.org"</span><span class="o">)).</span>
      <span class="n">body</span><span class="o">(</span><span class="s">"headers.Id"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"Test"</span><span class="o">));</span>
    <span class="n">resp</span><span class="o">.</span><span class="na">assertThat</span><span class="o">().</span><span class="na">header</span><span class="o">(</span><span class="s">"Connection"</span><span class="o">,</span> <span class="s">"keep-alive"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
<p>Based on the Service Object class we created before, we can create a simple test to exercise HTTP GET method and validate the response body.</p>

<ol>
<li>Make a request call to HTTP method described in your Service Object class.</li>
<li>Validate the response body.</li>
</ol>

<p>The HTTP GET method described in service class is being called here. Next, the response is being validated.</p>

<p>You can check other tests by the following link:</p>

<p><a href="https://github.com/jdi-testing/jdi-dark/tree/master/jdi-httpTests">JDI Dark test examples</a></p>
<h2 id='3-create-tests-without-using-service-object'>3. Create tests without using Service Object</h2><pre class="highlight java tab-java"><code><span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">noServiceObjectTest</span><span class="o">(){</span>
    <span class="n">RestResponse</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">GET</span><span class="o">(</span><span class="n">requestData</span><span class="o">(</span>
      <span class="n">rd</span> <span class="o">-&gt;</span> <span class="o">{</span><span class="n">rd</span><span class="o">.</span><span class="na">url</span><span class="o">=</span><span class="s">"http://httpbin.org/get"</span><span class="o">;</span>
           <span class="n">rd</span><span class="o">.</span><span class="na">headers</span><span class="o">=</span><span class="k">new</span> <span class="n">MapArray</span><span class="o">&lt;&gt;(</span><span class="k">new</span> <span class="n">Object</span><span class="o">[][]{</span>
              <span class="o">{</span><span class="s">"Name"</span><span class="o">,</span><span class="s">"Roman"</span><span class="o">},</span>
              <span class="o">{</span><span class="s">"Id"</span><span class="o">,</span><span class="s">"TestTest"</span><span class="o">}</span>
           <span class="o">});}</span>
      <span class="o">));</span>
<span class="o">}</span>
</code></pre>
<p>As it has been mentioned, you are still able to write tests without using Service Object model.
It is possible to call HTTP methods directly from your tests. You just need to provide required information within the method arguments.</p>

<p>In this test we make an HTTP GET request with invoked request data, which contains URL and headers.</p>
<h2 id='4-query-parameters-headers-cookies-support'>4. Query Parameters, Headers, Cookies support</h2><pre class="highlight java tab-java"><code><span class="nd">@QueryParameter</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"test"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"test"</span><span class="o">)</span>
<span class="nd">@GET</span><span class="o">(</span><span class="s">"/get"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">getInfo</span><span class="o">;</span>
</code></pre><pre class="highlight java tab-java"><code><span class="nd">@QueryParameters</span><span class="o">({</span>
    <span class="nd">@QueryParameter</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"param1"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"test"</span><span class="o">),</span>
    <span class="nd">@QueryParameter</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"param2"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"test"</span><span class="o">)</span>
<span class="o">})</span>
<span class="nd">@GET</span><span class="o">(</span><span class="s">"/get"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">getInfo</span><span class="o">;</span>
</code></pre><pre class="highlight java tab-java"><code><span class="nd">@Headers</span><span class="o">({</span>
    <span class="nd">@Header</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Name"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"Roman"</span><span class="o">),</span>
    <span class="nd">@Header</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Id"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"Test"</span><span class="o">)</span>
<span class="o">})</span>
<span class="nd">@Cookie</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"session_id"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"1234"</span><span class="o">)</span>
<span class="nd">@GET</span><span class="o">(</span><span class="s">"/get"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">getInfo</span><span class="o">;</span>
</code></pre>
<p>JDI Dark has support for query parameters, you can specify them in your service class.
You just need to use <em>@QueryParameter</em> annotation in your method or service class description.</p>

<p>If you need to specify several query parameters, then use <em>@QueryParameters</em> annotation, where you can put all of your request parameters.</p>

<p>Just the same way you can specify headers and cookies. JDI Dark has special annotation for them as well.</p>
<h2 id='5-performance-testing-support'>5. Performance testing support</h2><pre class="highlight java tab-java"><code> <span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">simplePerformanceTest</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">PerformanceResult</span> <span class="n">pr</span> <span class="o">=</span> <span class="n">loadService</span><span class="o">(</span><span class="mi">3600</span><span class="o">,</span> <span class="n">getInfo</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Average time: "</span> <span class="o">+</span> <span class="n">pr</span><span class="o">.</span><span class="na">AverageResponseTime</span> <span class="o">+</span> <span class="s">"ms"</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Requests amount: "</span> <span class="o">+</span> <span class="n">pr</span><span class="o">.</span><span class="na">NumberOfRequests</span><span class="o">);</span>
    <span class="n">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">pr</span><span class="o">.</span><span class="na">NoFails</span><span class="o">(),</span> <span class="s">"Number of fails: "</span> <span class="o">+</span> <span class="n">pr</span><span class="o">.</span><span class="na">NumberOfFails</span><span class="o">);</span> 
<span class="o">}</span>
</code></pre>
<p>There is the support for measuring time your requests take.</p>

<p>It is possible to call your service several times and get the descriptive results.</p>

<p>You can load your service and analyse the response time.</p>
<h1 id='tutorial'>Tutorial</h1>
<p>TBD</p>
<h2 id='1-integration'>1. Integration</h2>
<p>TBD</p>
<h2 id='2-jdi-dark-at-glance'>2. JDI Dark at glance</h2>
<p>TBD</p>
<h2 id='3-jdi-dark-service-objects'>3. JDI Dark Service Objects</h2>
<p>TBD</p>
<h2 id='4-jdi-dark-performance'>4. JDI Dark Performance</h2>
<p>TBD</p>
<h2 id='5-jdi-dark-and-cucumber'>5. JDI Dark and Cucumber</h2>
<p>TBD</p>
<h2 id='jdi-dark-settings-at-glance'>JDI Dark settings at glance</h2>
<p>TBD</p>
<h2 id='api-testing-framework-structure'>API Testing Framework structure</h2>
<p>TBD</p>
<h1 id='documentation'>Documentation</h1><h2 id='framework-usage'>Framework usage</h2><pre class="highlight plaintext"><code>import static com.epam.http.requests.ServiceInit.init;
</code></pre>
<p>For effective usage of JDI Dark framework it is recommended to statically import the init() method of ServiceInit class.</p>

<p>This is an entry point for initialising your Service Object class.</p>
<h2 id='http-methods'>HTTP methods</h2>
<p>JDI Dark supports the following HTTP methods:</p>

<ul>
<li>GET</li>
<li>POST</li>
<li>PUT</li>
<li>PATCH</li>
<li>DELETE</li>
<li>OPTIONS</li>
<li>HEAD</li>
</ul>

<p>For all of these methods there are annotations named after methods in <em>com.epam.http.annotations.</em>* package.
All of these annotations take a value of URI to make request call to. Those annotations are supposed to be used in your Service Object class.</p>

<p>To point the base URI of your service it&#39;s convenient to use <em>@ServiceDomain</em> annotation with provided URL as a value.
Then values in your methods annotations might be just specific URL paths.</p>
<h2 id='request-data'>Request Data</h2>
<p>You might need to use specific request data in your requests. Cookies, headers, query parameters and Content-type are available in annotation form.
So you can specify them in your Service Object class with provided name and value.</p>

<p>There is a class <em>com.epam.http.requests.RequestData.</em>* which represents the data being sent with request.</p>

<p>It is also possible to specify request data when making a request call.</p>
<h3 id='request-body'>Request body</h3><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">RequestData</span> <span class="nf">requestBody</span><span class="o">(</span><span class="n">String</span> <span class="n">body</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">RequestData</span> <span class="nf">requestData</span><span class="o">(</span><span class="n">JAction1</span><span class="o">&lt;</span><span class="n">RequestData</span><span class="o">&gt;</span> <span class="n">valueFunc</span><span class="o">)</span>
</code></pre>
<p>Request body can be set when making a request call. Just pass it as argument to the <em>call()</em> method or within the RequestData object,
that contains the next fields:</p>

<ul>
<li>String url</li>
<li>String body</li>
<li>ContentType contentType</li>
<li>MapArray<String, String> headers</li>
<li>MapArray<String, String> pathParams</li>
<li>MapArray<String, String> queryParams</li>
<li>MapArray<String, String> cookies</li>
</ul>

<p>All of these fields can be set/updated from call() method as well.</p>

<p>You may need to statically import <em>com.epam.http.requests.RequestData.</em>* package.</p>
<pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="n">RestResponse</span> <span class="nf">call</span><span class="o">(</span><span class="n">RequestSpecification</span> <span class="n">requestSpecification</span><span class="o">)</span> 
</code></pre>
<p>There is also support to make a request call with Rest Assured request specification.</p>
<h3 id='path-parameters'>Path parameters</h3><pre class="highlight java tab-java"><code><span class="nd">@ContentType</span><span class="o">(</span><span class="n">JSON</span><span class="o">)</span> <span class="nd">@GET</span><span class="o">(</span><span class="s">"/boards/{board_id}"</span><span class="o">)</span>
<span class="kd">static</span> <span class="n">RestMethod</span> <span class="n">getBoardById</span><span class="o">;</span>

<span class="nd">@ContentType</span><span class="o">(</span><span class="n">JSON</span><span class="o">)</span> <span class="nd">@GET</span><span class="o">(</span><span class="s">"/boards/{board_id}/cards/{short_card_id}/"</span><span class="o">)</span>
<span class="kd">static</span> <span class="n">RestMethod</span> <span class="n">getBoardCardById</span><span class="o">;</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">getBoardById</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">RestResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="n">getBoardById</span>
        <span class="o">.</span><span class="na">call</span><span class="o">(</span><span class="n">requestPathParams</span><span class="o">(</span><span class="s">"board_id"</span><span class="o">,</span> <span class="n">BOARD_ID</span><span class="o">));</span>
    <span class="n">response</span><span class="o">.</span><span class="na">isOk</span><span class="o">().</span><span class="na">body</span><span class="o">(</span><span class="s">"id"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="n">BOARD_ID</span><span class="o">));</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">getCardByShortId</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">getBoardCardById</span><span class="o">.</span><span class="na">call</span><span class="o">(</span><span class="n">requestPathParams</span><span class="o">(</span><span class="k">new</span> <span class="n">Object</span><span class="o">[][]</span> <span class="o">{{</span><span class="s">"board_id"</span><span class="o">,</span> <span class="n">BOARD_ID</span><span class="o">},</span> <span class="o">{</span><span class="s">"short_card_id"</span><span class="o">,</span> <span class="s">"1"</span><span class="o">}}))</span>
        <span class="o">.</span><span class="na">isOk</span><span class="o">().</span><span class="na">assertThat</span><span class="o">().</span><span class="na">body</span><span class="o">(</span><span class="s">"name"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"Lorem ipsum dolor sit amet"</span><span class="o">));</span>
<span class="o">}</span>
</code></pre>
<p>A URL can have one or several path parameters, each denoted with curly braces, e.g. <em>/get/{board_id}</em>, <em>/boards/{board_id}/cards/{short_card_id}/</em>. You can use them in your Service Object methods and 
replace it with values when making a request call.</p>

<p>There are methods provided for such cases:</p>

<table><thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Return Type</th>
</tr>
</thead><tbody>
<tr>
<td><strong>requestPathParams(String paramName, String paramValue)</strong></td>
<td>pass one parameter to a path</td>
<td>RequestData</td>
</tr>
<tr>
<td><strong>requestPathParams(Object[][] params)</strong></td>
<td>pass several parameters to a path</td>
<td>RequestData</td>
</tr>
</tbody></table>
<h2 id='tests-without-service-object'>Tests without Service Object</h2><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">RestResponse</span> <span class="nf">GET</span><span class="o">(</span><span class="n">RequestData</span> <span class="n">data</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">RestResponse</span> <span class="nf">GET</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">RestResponse</span> <span class="nf">GET</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">,</span> <span class="n">RequestSpecification</span> <span class="n">requestSpecification</span><span class="o">)</span> 
</code></pre>
<p>All the HTTP methods mentioned before are available not only in annotation form.
There are the same methods accessible from <em>com.epam.http.requests.RestMethods.</em>* with several signatures.</p>

<p>You can call these methods with either of given arguments:</p>

<ul>
<li><em>com.epam.http.requests.RequestData</em></li>
<li>String URL</li>
<li>Rest Assured request specification: <em>io.restassured.specification.RequestSpecification</em></li>
</ul>
<h2 id='tests-with-service-object'>Tests with Service Object</h2><h3 id='create-service'>Create service</h3><pre class="highlight java tab-java"><code><span class="nd">@ServiceDomain</span><span class="o">(</span><span class="s">"https://httpbin.org/"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceExample</span> <span class="o">{</span>
    <span class="nd">@ContentType</span><span class="o">(</span><span class="n">JSON</span><span class="o">)</span> <span class="nd">@GET</span><span class="o">(</span><span class="s">"/get"</span><span class="o">)</span>
    <span class="nd">@Headers</span><span class="o">({</span>
        <span class="nd">@Header</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Name"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"Roman"</span><span class="o">),</span>
        <span class="nd">@Header</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Id"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"Test"</span><span class="o">)</span>
    <span class="o">})</span>
    <span class="kd">static</span> <span class="n">RestMethod</span><span class="o">&lt;</span><span class="n">Info</span><span class="o">&gt;</span> <span class="n">getInfo</span><span class="o">;</span>

    <span class="nd">@Header</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Type"</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">"Test"</span><span class="o">)</span>
    <span class="nd">@POST</span><span class="o">(</span><span class="s">"/post"</span><span class="o">)</span>
    <span class="n">RestMethod</span> <span class="n">postMethod</span><span class="o">;</span>

    <span class="nd">@PUT</span><span class="o">(</span><span class="s">"/put"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">putMethod</span><span class="o">;</span>
    <span class="nd">@PATCH</span><span class="o">(</span><span class="s">"/patch"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">patch</span><span class="o">;</span>
    <span class="nd">@DELETE</span><span class="o">(</span><span class="s">"/delete"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">delete</span><span class="o">;</span>
    <span class="nd">@GET</span><span class="o">(</span><span class="s">"/status/%s"</span><span class="o">)</span> <span class="n">RestMethod</span> <span class="n">status</span><span class="o">;</span>

<span class="o">}</span> 
</code></pre>
<p>It&#39;s possible to describe tested web service as Service Object class using annotations.</p>
<h3 id='create-tests-for-service'>Create tests for service</h3><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">ServiceExample</span> <span class="n">service</span><span class="o">;</span>

    <span class="nd">@BeforeClass</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">service</span> <span class="o">=</span> <span class="n">init</span><span class="o">(</span><span class="n">ServiceExample</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">simpleRestTest</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">RestResponse</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">ServiceExample</span><span class="o">.</span><span class="na">getInfo</span><span class="o">.</span><span class="na">call</span><span class="o">();</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">isOk</span><span class="o">().</span>
                <span class="n">body</span><span class="o">(</span><span class="s">"url"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"https://httpbin.org/get"</span><span class="o">)).</span>
                <span class="n">body</span><span class="o">(</span><span class="s">"headers.Host"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"httpbin.org"</span><span class="o">)).</span>
                <span class="n">body</span><span class="o">(</span><span class="s">"headers.Id"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"Test"</span><span class="o">));</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">assertThat</span><span class="o">().</span><span class="na">header</span><span class="o">(</span><span class="s">"Connection"</span><span class="o">,</span> <span class="s">"keep-alive"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">serviceInitTest</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">RestResponse</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="na">postMethod</span><span class="o">.</span><span class="na">call</span><span class="o">();</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">isOk</span><span class="o">().</span><span class="na">assertThat</span><span class="o">().</span>
                <span class="n">body</span><span class="o">(</span><span class="s">"url"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"https://httpbin.org/post"</span><span class="o">)).</span>
                <span class="n">body</span><span class="o">(</span><span class="s">"headers.Host"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"httpbin.org"</span><span class="o">));</span>
    <span class="o">}</span>

<span class="o">}</span>
</code></pre>
<p>This class can be initialized in tests.
Fields of initialized object can be used to send requests from tests.</p>
<h3 id='use-predefined-restspecification'>Use predefined RestSpecification</h3><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ServiceTest</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">RequestSpecification</span> <span class="n">requestSpecification</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">ServiceExample</span> <span class="n">service</span><span class="o">;</span>

    <span class="nd">@BeforeClass</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">requestSpecification</span> <span class="o">=</span> <span class="n">given</span><span class="o">().</span><span class="na">filter</span><span class="o">(</span><span class="k">new</span> <span class="n">AllureRestAssured</span><span class="o">());</span>
        <span class="n">requestSpecification</span><span class="o">.</span><span class="na">auth</span><span class="o">().</span><span class="na">basic</span><span class="o">(</span><span class="s">"user"</span><span class="o">,</span> <span class="s">"password"</span><span class="o">);</span>
        <span class="n">service</span> <span class="o">=</span> <span class="n">init</span><span class="o">(</span><span class="n">ServiceExample</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">requestSpecification</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
<p>It&#39;s possible to setup used RestSpecification. 
Predefined settings will be used in all endpoints of that service.
In this example basic-auth credentials will be passed to all endpoints.  </p>
<h2 id='response-data'>Response data</h2><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="n">ValidatableResponse</span> <span class="nf">isOk</span><span class="o">()</span>
<span class="kd">public</span> <span class="n">ValidatableResponse</span> <span class="nf">hasErrors</span><span class="o">()</span>
<span class="kd">public</span> <span class="n">ValidatableResponse</span> <span class="nf">isStatus</span><span class="o">(</span><span class="n">ResponseStatusType</span> <span class="n">type</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">RestResponse</span> <span class="nf">assertStatus</span><span class="o">(</span><span class="n">ResponseStatus</span> <span class="n">rs</span><span class="o">)</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="n">ValidatableResponse</span> <span class="nf">assertBody</span><span class="o">(</span><span class="n">MapArray</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Matcher</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">params</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">ValidatableResponse</span> <span class="nf">assertBody</span><span class="o">(</span><span class="n">Object</span><span class="o">[][]</span> <span class="n">params</span><span class="o">)</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="n">String</span> <span class="nf">getFromHtml</span><span class="o">(</span><span class="n">String</span> <span class="n">path</span><span class="o">)</span>
</code></pre><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="n">Response</span> <span class="nf">raResponse</span><span class="o">()</span>
<span class="kd">public</span> <span class="n">ValidatableResponse</span> <span class="nf">assertThat</span><span class="o">()</span>
</code></pre>
<p>The class <em>com.epam.http.response.RestResponse</em> represents the Response data in JDI Dark.</p>

<p>There are methods for checking status code of response. Methods <em>isOk()</em> and <em>hasErrors()</em> verify that status code is 2** or 4**, respectively.</p>

<p>Response body can be verified using method <em>assertBody()</em>.</p>

<p>Methods <em>cookie()</em> and <em>headers()</em> return response cookies and headers values.</p>

<p>Method <em>getFromHtml()</em> returns html content of the page by provided path.</p>

<p>Methods <em>raResponse</em> and <em>assertThat()</em> returns Rest Assured Response and ValidatableResponse, so it is possible to use Rest Assured methods for validating the response body.</p>
<h2 id='deserialization'>Deserialization</h2><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="n">T</span> <span class="nf">callAsData</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span>
<span class="kd">public</span> <span class="n">T</span> <span class="nf">asData</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span>
</code></pre>
<p>JDI Dark provides support for deserialization response into Java object. Just use method <em>callAsData()</em> instead of <em>call()</em> and provide the class as argument.</p>
<h2 id='performance-testing'>Performance testing</h2><pre class="highlight java tab-java"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">PerformanceResult</span> <span class="nf">loadService</span><span class="o">(</span><span class="kt">long</span> <span class="n">liveTimeSec</span><span class="o">,</span> <span class="n">RestMethod</span><span class="o">...</span> <span class="n">requests</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">PerformanceResult</span> <span class="nf">loadService</span><span class="o">(</span><span class="n">RestMethod</span><span class="o">...</span> <span class="n">requests</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">PerformanceResult</span> <span class="nf">loadService</span><span class="o">(</span><span class="kt">long</span> <span class="n">liveTimeMSec</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">RestMethod</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;</span> <span class="n">weightRequests</span><span class="o">)</span>
</code></pre>
<p>Simple performance testing is supported by JDI Dark. There is <em>com.epam.http.performance</em> package available that contains
several classes and methods for collecting requests statistics.</p>

<p>You can load your service and get average response time and number of fails comparing to amount of requests. Just use <em>loadService()</em> method with suitable signature. </p>
<h2 id='reporting'>Reporting</h2>
<p>If you want to use Allure framework for reporting, JDI Dark has out-of-the-box support for generating attachments for Allure reports.
Just simply install Allure as you would always do, those attachments will be automatically added to report.</p>

<p>All test execution results are being saved to <strong>base_directory/allure-results</strong> folder.</p>

<p>If you use maven, then you will need to configure Allure maven plugin to take results from appropriate folder.</p>
<pre class="highlight plaintext"><code>&lt;configuration&gt;
    &lt;resultsDirectory&gt;${basedir}/allure-results&lt;/resultsDirectory&gt;
&lt;/configuration&gt;
</code></pre>
<p>After generating allure results, the full request and response information will be attached to every test that was executed.</p>

<p>Here is the example of Allure report with attached request body:</p>

<p><img src="images/allure_request.png" alt="Allure Request" /></p>
<h2 id='access-restassured'>Access RestAssured</h2>
<p>TBD</p>
<h2 id='review-guide'>Review Guide</h2><h3 id='easy-way-to-pass-review'>Easy way to pass review</h3>
<ul>
<li>Good code style</li>
<li>No Wildcards imports (with asterisk *). You can use settings from the picture below
<img src="images/review-wildcard-imports.png" alt="Wildcard Imports" /></li>
<li><code>Ctrl+Alt+O</code> &amp; <code>Ctrl+Alt+L</code> in IDEA IDE before any commit</li>
<li>Right branch and label in PR</li>
</ul>
<h3 id='short-checklist'>Short checklist</h3>
<ol>
<li>Branch</li>
<li>Label</li>
<li>Codacy</li>
<li>*Other checks</li>
<li>Changed files</li>
</ol>
<h3 id='detailed-list'>Detailed list</h3>
<ol>
<li>Codacy check should be OK. If not then you need to see what&#39;s wrong</li>
<li>*When Travis would be fixed</li>
<li>Also reviewing files you can mark them with checkboxes. Should be checked:

<ul>
<li>Code style</li>
<li>Understandable naming</li>
<li>Unnecessary empty lines and spaces</li>
<li>Unnecessary or forgotten comments</li>
<li>Chaining should be separated by lines</li>
</ul></li>
</ol>
<h3 id='recommended-tools'>Recommended tools</h3>
<ol>
<li>Intellij IDEA</li>
<li>Git</li>
</ol>
<h3 id='using-libraries'>Using libraries</h3>
<ol>
<li>As log library: slf4j + logback-classic (TO_VERIFY)</li>
<li>As tests runner: TestNG (TO_VERIFY)</li>
<li>As reporter: Allure Framework (TO_VERIFY)</li>
<li>As test framework: JDI (TO_VERIFY)</li>
</ol>
<h3 id='intellij-idea-preferences'>Intellij IDEA Preferences</h3>
<ol>
<li>Preferences -&gt; Version Control -&gt; Commit Dialog &gt; Before commit block, setup checkboxes: Reformat Code, Rearrange code, Optimize imports</li>
<li>In app press hotkeys: <code>Ctrl+Shift+Alt+L</code>, choose checkboxes: Optimize imports, Rearrange Code</li>
<li>When you work to apply autoreformatting please use (on file, on directory or inside file) <code>Ctrl-Alt-L</code> hotkey</li>
<li>To fast open any class by its name use <code>Ctrl+N</code>/<code>Cmd+O</code></li>
<li>Be sure that NOT checked: Settings-&gt;Editor-&gt; Code Style -&gt; Java -&gt; Tabs and Indents -&gt; Use tab character</li>
<li>Be sure that equals to 4: Settings-&gt;Editor-&gt; Code Style -&gt; Java -&gt; Tabs and Indents -&gt; Tab size field and Indent field</li>
<li>Turn off wildcard imports: set to 999 for Settings -&gt; Editor -&gt; Code style -&gt; Java -&gt; Imports -&gt; Class count to use imports with <code>*</code> field and Names count to use static imports with <code>*</code></li>
</ol>
<h3 id='cvs-section'>CVS section</h3>
<ol>
<li>Use Git

<ul>
<li>Name branches with useful names </li>
</ul></li>
<li>Merge code into any branch only through GitHub pull request (PR)

<ul>
<li>Name PR with useful name</li>
</ul></li>
<li>Before add reviewers to your PR be ensure: 

<ul>
<li>no codacy issues</li>
<li>code is ready to review</li>
<li>you push the last changes</li>
<li>you have last changes from target branch</li>
<li>there is no merge conflicts</li>
<li>you take into account all review comments (if such were)</li>
</ul></li>
<li>Add DarkReviewTeam as reviewers or re-request review (if there is already reviewers in PR)</li>
<li>When you get review changes request you should resolve all issues and re-request code review from the same reviewers</li>
<li>Repeat until branch will be merged by reviewers</li>
<li>Keep actual <strong>.gitignore</strong> file</li>
</ol>
<h3 id='code-style'>Code style</h3>
<ol>
<li>Use spaces, 1 tab size equals to 4</li>
<li>Don&#39;t use wildcard imports</li>
<li>Use Intellij&#39;s autoreformatting, imports optimization and rearrange option</li>
<li>Fix all Codacy issues</li>
<li>If Codacy issue shouldn&#39;t be resolved use warnings suppressions</li>
<li>Use semantic-value names for classes , variables, methods and so on. Use full version of words (human instead of h and so on). Common abbreviations (as id, uid and so on are applied). Use valuable names, for example instead of accountList use accounts and so on</li>
<li>Remove double empty lines, use empty lines only when it make sense (additionally to autoreformatting)</li>
<li>Use correct line breaks: (PROVIDE_SAMPLES)</li>
<li>Try to use lines with no more 100-120 symbols (including indents) </li>
<li>Use chaining style, recommended sample:
<code>java 
object
.method(1)
.otherMethod();
</code></li>
<li>Always use <code>{}</code> braces for even empty if, for, etc.</li>
<li>Follow to the sequence of keywords: public protected private abstract default static final transient volatile synchronized native strictfp</li>
<li>Don&#39;t use such conveniences as: <code>mValue</code>, <code>_value</code>, and so on. Acceptable <code>__</code> as unused argument of data provider in test methods</li>
<li>Feel free to smart refactoring</li>
<li>Feel free to use smart ?:</li>
<li>Use <code>UpperCamelCase</code> naming style for classes, <code>lowerCamelCase</code> for fields and methods, <code>UPPERCASE</code> for enums, <code>lowercase</code> for packages</li>
<li>Always use <code>@Override</code> annotation</li>
<li>Don&#39;t leave empty <code>catch{}</code>, use relevant exceptions with messages</li>
<li>Try to not use global variables</li>
<li>Use variables for integer, string and other values (for instance, <code>int piNumber=3.14; println(piNumber)</code>)</li>
<li>Write comments in English</li>
<li>It&#39;s better to write code than create task to write code</li>
<li>It&#39;s better to create task and <code>TODO</code> with this task number than to write simple <code>TODO</code> in code</li>
<li>It&#39;s better to write simple understandable <code>TODO</code> in code than to tell about problem to someone</li>
<li>It&#39;s better to tell about a problem to someone than to not take actions at all</li>
<li>Always leave newline symbol as a last symbol of file</li>
</ol>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
